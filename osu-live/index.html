<pre id="content">
</pre>

<script>
    function getCook(cookiename){var cookiestring=RegExp(""+cookiename+"[^;]+").exec(document.cookie);return decodeURIComponent(!!cookiestring?cookiestring.toString().replace(/^[^=]+./,""):"")}
    function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}
    var HttpClient=function(){this.get=function(aUrl,aCallback){var anHttpRequest=new XMLHttpRequest();anHttpRequest.onreadystatechange=function(){if(anHttpRequest.readyState==4&&anHttpRequest.status==200)aCallback(anHttpRequest.responseText)};anHttpRequest.open("GET",aUrl,!0);anHttpRequest.send(null)}}
    
    var client = new HttpClient();

    if (!getCook("key")) {
        do {
            var apiKey = prompt("Please enter a valid osu-api key", "https://osu.ppy.sh/p/api");
            var usernameTest = ""
            client.get(`https://osu.ppy.sh/api/get_user?k=${apiKey}&u=Alipoodle`), function(response) {
                usernameTest = JSON.parse(response)[0]
            }
        } while (apiKey == null || apiKey == "" || usernameTest.username)
        

        setCookie("key", apiKey, 90)
    }
    console.log(getCook("key"));

    

    var key = "04e74138adf8fc305189390e83cf8924c617d9b2";
    var username = "Alipoodle";

    
    client.get(`https://osu.ppy.sh/api/get_user?k=${key}&u=${username}`, function(response) {
        var player = JSON.parse(response)[0]; // Stored in an array.
        document.getElementById("content").innerHTML = player.username;
    });
</script>